# ============================================================================
# ESPHome YAML - Generated by ESPHome Designer
# ============================================================================
# TARGET DEVICE: ESP32-2432S028R CYD (Cheap Yellow Display) 2.8" 320x240
#         - Display Platform: ili9xxx (ILI9342)
#         - Touchscreen: XPT2046 (SPI Resistive)
#         - RGB LED: Yes
#         - Speaker: Yes (GPIO26)
#         - Light Sensor: Yes (GPIO34)
#         - Framework: ESP-IDF
# ============================================================================
#
# BASED ON: https://github.com/SpicyLimes/ESP32-2432S028R-CYD-Files
# Hardware configuration adapted for ESPHome Designer.
#
# ============================================================================
#
# SETUP INSTRUCTIONS:
#
# STEP 1: Copy the Material Design Icons font file
#         - From this repo: resources/fonts/materialdesignicons-webfont.ttf
#         - To ESPHome: /config/esphome/fonts/materialdesignicons-webfont.ttf
#         (Create the fonts folder if it doesn't exist)
#
# STEP 2: Create a new device in ESPHome
#         - Click "New Device"
#         - Name: your-device-name
#         - Select: ESP32
#         - Framework: ESP-IDF
#
# STEP 3: REPLACE your entire YAML with this generated output
#         (This profile includes full esphome: and esp32: sections)
#
# ============================================================================

esphome:
  min_version: 2024.12.0

esp32:
  board: esp32dev
  framework:
    type: esp-idf

output:
  - platform: ledc
    id: gpio_backlight_pwm
    pin: GPIO21
  - platform: ledc
    id: output_red
    pin: GPIO4
    inverted: true
  - platform: ledc
    id: output_green
    pin: GPIO16
    inverted: true
  - platform: ledc
    id: output_blue
    pin: GPIO17
    inverted: true

light:
  - platform: monochromatic
    output: gpio_backlight_pwm
    name: Display Backlight
    icon: mdi:lightbulb-on
    id: display_backlight
    restore_mode: ALWAYS_ON
  - platform: rgb
    id: rgb_led
    name: RGB LED
    red: output_red
    green: output_green
    blue: output_blue
    restore_mode: ALWAYS_OFF

sensor:
  - platform: adc
    name: Light Sensor
    pin: GPIO34
    id: light_sensor
    update_interval: 60s

spi:
  - id: tft
    clk_pin: GPIO14
    mosi_pin: GPIO13
    miso_pin:
      number: GPIO12
      ignore_strapping_warning: true
  - id: touch
    clk_pin: GPIO25
    mosi_pin: GPIO32
    miso_pin: GPIO39

touchscreen:
  - id: my_touchscreen
    platform: xpt2046
    spi_id: touch
    cs_pin: GPIO33
    interrupt_pin: GPIO36
    threshold: 400
    calibration:
      x_min: 280
      x_max: 3860
      y_min: 340
      y_max: 3860
    transform:
      swap_xy: false
      mirror_x: false
      mirror_y: true

display:
  - id: my_display
    platform: ili9xxx
    model: ILI9342
    spi_id: tft
    cs_pin:
      number: GPIO15
      ignore_strapping_warning: true
    dc_pin:
      number: GPIO2
      ignore_strapping_warning: true
    invert_colors: false
    color_palette: 8BIT
    rotation: 0
    dimensions:
      height: 240
      width: 320
    update_interval: never
    auto_clear_enabled: false

    # __LAMBDA_PLACEHOLDER__
